(function(e){function f(b,a,c,d){this.str=b;this.dimensions=a||1;this.useDeltaNegative=!!c;this.defaultValue=d||0;this.pos=0;this.reset()}function k(b){return m<=b&&b<=g}function l(b){return"number"===typeof b}function n(b,a){return Array.apply(0,Array(b)).map(function(){return a})}function p(b,a){function c(){return b.apply(this,a)}c.prototype=b.prototype;return new c}var m=48,g=57;e.DeltaIterator=f;f.deltaDecode=function(){for(var b=p(f,arguments),a=[],c;null!==(c=b.next());)a.push(c);return a};
e=f.prototype;e.next=function(b){var a=this._next(),c=this.currentDimension,d=!1;l(a)?(b=this.prevDeltaNegative[c],this.useDeltaNegative&&(0>a&&(b=this.prevDeltaNegative[c]=!b,a=-a),b&&(a=-a)),a+=this.prev[c],d=!0):l(b)&&(null!==a&&this.pos--,a=b,d=!0);d&&(this.prev[c]=a,this.currentDimension=(c+1)%this.dimensions);return a};e._next=function(){var b=this.str,a=null;if(b&&this.pos<b.length){var c=b[this.pos++],a=c.charCodeAt(0);if(65<=a&&83>=a){for(var c=74<a,d=a-(c?74:65);this.pos<b.length&&k(a=b[this.pos].charCodeAt(0));)d=
10*d+(a-m),this.pos++;a=c?-d:d}else a=c}return a};e.getPosition=function(){return this.pos};e.seek=function(b){this.pos=b;this.reset()};e.reset=function(){this.currentDimension=0;this.prev=n(this.dimensions,this.defaultValue);this.prevDeltaNegative=n(this.dimensions,!1)};e.isValue=l})(this);
(function(e){function f(g){g=new e.DeltaIterator(g,2,!0);for(var b=[],a={x:[],y:[],cm:[],length:0},c=0,d=k,f=!1,h;null!==(h=g.next());)g.isValue(h)?(a.x.push(h),a.y.push(c=g.next(c)),a.cm.push(d),a.length++,d=l):"a"===h?d=n:"b"===h?d=p:"c"===h?f=!0:":"===h?(b.push(a),a={x:[],y:[],cm:[],length:0},g.reset(),c=0,d=k,f=!1):f?(d=m,f=!1):d=k;b.push(a);return b}var k=0,l=1,n=2,p=3,m=4;e.addEventListener("message",function(g){e.postMessage({id:g.data.id,coords:f(g.data.coordString)})})})(this);